---
name: Vue.jsでブログを作りたい１
path: /11
tag: [JavaScript,Programing]
description: Vue.jsでブログを作る
date: 2019/3/16
---

## はじめに

めっちゃ久しぶりです、しにゃいです
前回の投稿から３ヶ月経っちゃいましたね
色々忙しくて全然ブログ書いてなかったんですけどその辺いついてはあとで気が向いたら描こうかなと

今回のテーマはこのブログを Vue.js を使ってリライトしようかなってやつです。
現状のブログは HTML で地打ちしてますね
なんでこんなことするかっていうとただ単に Vue あたりの経験欲しいなってのとデザイン修正したいなって思ったからです
一応断っておきますけどこれは多分連載していく感じですし、体系的な知識を語るというよりも勉強しながら書いていくという感じですので多分ミスなり非効率的なやり方もあります。ご了承ください(多分あとでまとまて記事にします)

俺自身も苦しみながら書いてるので初歩的な過ちとかはいっぱいあるだろうけど許してほしい。
一応練習で作ってるので CMS は使わない方針で頑張る

## 仕様設定

開発するときに一番大事というかちゃんとしないといけないフェーズ、仕様設定です。これミスるとめっちゃめんどくさいっすよねマジで

- ホーム画面があって、記事がズラーっと表示されている

- 記事ごとにタグがあって、そのタグからそのタグが使われている記事一覧表示もできる

- もうちょっとちゃんとしたコメントボックス

- シェア機能

- お手製スタイルシート

- git hub 上でマークダウンで記事書く、それを PR しマージすれば反映される

- 目標としてはこんな感じですかね、多分ホーム画面作ったくらいでブログそのものは移行します。

## セットアップ

今回は Vue.js を使います。
でその前に色々と立ち上げなきゃいけないですね。
Vue CLI3 を使ってパパッと構築しちゃいましょう。
ちなみに Vue cli ってのは Vue.js のためのコマンドツールで、簡単な view くらいならささっと作ってくれますし、アプリのプロジェクトを構築してくれたりもする。めっちゃ便利ですね。
ひとまずターミナルにて

```Console
npm i -g @vue/cli
```

を実行しちゃいましょう。
ここでいう i は install、-g は最新のって意味です。npm ってのは node に付属するパッケージマネージャーです。パッケージの管理や実行を扱ってくれます。
そのあと

```Console
npmi -g @vue/cli-service-global
```

を実行、これで vue cli は準備できました。
下に bootstrapl-vue の公式ドキュメントも貼っておきます(一応)が一通りの流れはこのブログ場でも解説しちゃおうかなと思います
[Vue.js](https://vuejs.org/) そのあと

```console
npx @vue/cli create {プロジェクト名}
```

で実行、プロジェクト名の中にはブログの名前でもぶち込んどけばいいと思うよ
これで cli が動いていい感じにセットアップしてくれます。
ただ一つ注意して欲しいんだけどこれ実行したとき
<img src="/static/1102.png" />
って聞かれえるけん画像みたいな感じで manually select のところで Enter、そうすると
<img src="/static/1103.png" />
上みたいな画面になるから router ってなってるとこでスペースキーを押してからエンター、あとは適当でいい
これは何したかっていうとルーティング設定ってやつもアプリケーションに取り込むよう設定してて、これをすることで url 遷移が可能になるって訳
そのあとは

```Console
cd プロジェクト名 npm run serve
```

上の二つのコードを実行して、ブラウザから localhost:8080 にアクセスすれば下みたいな感じの画面が出てくる、これでとりあえずのセットアップ完了
<img src="/static/1101.png" />
で上にある about ってやつクリックしてみ、リンク変わるじゃないですか。
勘のいい人はやけにページ遷移が高速だぞって思うかもしれないですけど、これはシングルページアプリケーションってやつでして要するに一気にページを読み込んじゃえば軽いみたいなノリです
グラブルとかで使われている技術ですね。 でもあれじゃないですか、じゃあこれをアップロードすれば動くんかってなるじゃないですか
もちろんそうじゃなく build という工程を挟む必要があります。
npm run build
を実行しましょう、そうすると dist というディレクトリが生成されます、それがアップロードするやつです。

## 記事を表示させよう

こうなると次は記事を表示させる段階に行きますね。
ひとまず生成された src ディレクトリの中に記事を叩き込むための contents フォルダを作成してぶち込もう。
<img src="/static/1104.png" />
でこんな感じで src のなかの router.js に追記して router で指定した path を開く
<img src="/static/1105.png" />
よっしゃーナイス！

でも router の path を

```javascript
path: "/:itemNumber";
```

とかにして変数組み込んでコード書くの楽にしたいやん？でもまだその時じゃないかなって
これについては一応実装できたけどダメな部分ってのもいっぱいあって、その辺についてもちゃんと書こうと思う
いい感じにルーティングしたい
contents フォルダの中に各記事をしまったじゃないですか、とりあえず僕の場合は 1.vue~11.vue まで記事をぶち込んで、さらに index.js ファイルを cotents フォルダに作成しました

これで vue ファイルを前もって export しとけば前述した SPA がどうたらって問題も解決される気はします。
で vue ファイルには

って感じで export させておく
この際従来の&lt;template&gt;構文を使うのではなく、(この場合 vue ファイルをコンポーネントとして読み込んでいるわけではないので、多分)、その記事本文についてはバッククオート(shift + @で出せる)で改行されている文字列を temp に代入し template として出力させている。
あとタグの情報や名前、デスクリプションも欲しいのでその辺の情報も info として出力させる。
で router.js には
getContent() { const dataId = parseInt(this.\$route.params.num, 10) - 1; return list[dataId] }
このメソッドを追記して、template のなかに v-html=getContent.template と指定すればその記事が読まれるようになる。
ただこれ結構おっきい問題をはらんでいて、ここで getContent は記事コンポーネントを読み込んでいるわけではない。
そもそも export しているのが vue インスタンスでもなんでもないからそれはそう。
だからこの template は template に見せかけたただの文字列だから、v-for などは記事の中で使えない。
し何より vue の魅力である双方向バインディングもへったくれも無くなるけど、まあ記事の表示に関しては関係ないかなとこれで妥協した。
でもやっぱ色々とめんどくさいことも多いのでできればちゃんとコンポーネントとして出力させたいけどそこまでの技術力はまだなかった()

## ホーム画面を作ろう

正直ここまでは母国語を持つ人なら誰でも到達できる、むしろこれができなきゃ刺身にたんぽぽ乗せる仕事すら危うい
で肝心のホーム画面だけど、大雑把な設計はそれぞれ記事 vue ファイルが出力してる info の中からデータを引っこ抜いて一覧表示させる感じで行こうかなって思う。
とりあえずホーム画面を書いてる views/Home.vue のなかをこんな感じで書き換えよう。

BlogHome というユーザー定義関数には、一ページあたりに表示する記事インデックスの長さを渡せばその分だけ記事 info のデータをもってきて、レンダリングできる形式で返してくれるというものだ
でこの状態で home を覗くと

ブログの情報の一覧が表示されてこれでオッケー
もちろんこの後もタグ情報を纏めたり CSS を整えたりコンポーネントもっと足したりやることはあるけどとりあえずは一回ここで区切ろうと思う
多分明日もコード書いてるしすぐ終わるかなって
