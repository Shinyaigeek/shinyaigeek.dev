---
company: Plaid, Inc.
startDate: "2022/04"
endDate: "2023/12"
position: Part-time employee
technologies: ["TypeScript", "Rollup", "Playwright", "GitHub Actions", "CloudFlare Workers"]
role: Platform Engineer
---

サードパーティスクリプトのオンデマンドビルド基盤のPoC（概念実証）を実施しました。Plaidを通じて配信されるこれらのスクリプトの内容は、顧客設定に基づいて変化します。以前は顧客設定が変更されるたびにビルドされていましたが、エッジコンピューティングを活用してオンデマンドビルドを実現し、CDNにキャッシュする方式を導入しました。このアプローチにより、顧客設定の迅速な反映、システムの簡素化、そして高速なロード時間を実現しました。WebアプリケーションのバンドラーやコンパイラをCloudflare Workers上で実行し、CDN環境内での低メモリ消費と高速化を最適化しました。

また、ブラウザ上でのQAテスト基盤の確立をリードしました。サードパーティスクリプトの複雑なビルドシステムにより、機能の包括的なテストや実際の環境でのテストが困難でした。顧客のビジネスに直接影響を与えるため、高いSLOが要求され、テストの難しさと失敗時の重大な影響から「リリース恐怖症」が生じていました。これを克服するため、堅牢なテスト基盤を構築しました。まず、複雑なビルドシステムを簡素化し、次に、テストシナリオ内で顧客設定をJSONとして定義できるフレームワークを開発しました。これにより、テスト中にスクリプトをビルドし、Playwrightを使用してブラウザで直接検証できるようになり、実際の環境で重要な機能の継続的かつ自動化されたテストが可能となり、アプリケーションの安定性が向上しました。

さらに、QAテスト基盤の構築にも貢献しました。Fastly CDNレイヤー内のVCLを活用し、Cookieベースの制御により、サードパーティスクリプトを実装している顧客の実際のホームページ上で直接開発環境にリダイレクトする仕組みを開発しました。これにより、実際の環境でのQAテストが可能となり、特定の環境や使用パターンでのみ発生する問題の特定と解決が容易になりました。これらの取り組みにより、アプリケーションの信頼性が大幅に向上しました。

最後に、デプロイフローを自動化しました。ビルドプロセスの複雑さから、デプロイフローも同様に複雑で、サービスを更新するにはすべてのコンポーネントをデプロイする必要がありました。さらに、デプロイターゲットが異なるリポジトリで管理されていたため、複雑なクロスリポジトリの変更が必要で、運用コストが高くなっていました。これらのタスクが完全に自動化可能であることを認識し、CI/CD駆動の自動化を実装しました。これにより、約10分かかっていた手動リリースプロセスがワンクリック操作に変わり、現場の運用が大幅に改善されました。